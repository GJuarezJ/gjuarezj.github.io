<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üéÅ Intercambio ‚Äî Familia Ju√°rez (Cerrado)</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; max-width:720px; margin:auto; padding:18px; }
    h1 { margin-top: 0; }
    .center { text-align:center; }
    .note { color:#555; font-size:14px; }
    table { border-collapse:collapse; width:100%; margin-top:12px; }
    td, th { border:1px solid #ccc; padding:8px; text-align:left; }
    #adminBox { display:none; background:#fafafa; padding:12px; border-radius:8px; margin-top:12px; }
    .danger { color:#a00; font-weight:600; }
    input, button { font-size:16px; padding:8px; width:100%; box-sizing:border-box; }
  </style>
</head>
<body>
  <h1>üéÅ Intercambio ‚Äî Familia Ju√°rez</h1>

  <!-- Mensaje p√∫blico: la p√°gina est√° cerrada -->
  <div id="publicView">
    <p class="note">El intercambio ya fue cerrado. Para evitar confusiones la vista p√∫blica fue deshabilitada; s√≥lo el organizador (Victor Rodriguez) puede ver la lista completa usando su enlace privado.</p>
    <p class="center"><strong class="danger">P√°gina cerrada al p√∫blico</strong></p>
  </div>

  <!-- Vista del organizador (se mostrar√° s√≥lo si la URL tiene ?admin=familia-juarez&seed=123456 ) -->
  <div id="adminBox" aria-hidden="true">
    <h2>Vista del organizador</h2>
    <p class="note">Est√°s viendo la tabla porque entraste con la clave de organizador correcta en la URL.</p>
    <p class="note">Seed: <code id="seedDisplay"></code></p>

    <table id="adminTable" aria-label="Tabla de asignaciones">
      <thead>
        <tr><th>Persona (da)</th><th>Le toca regalar a</th></tr>
      </thead>
      <tbody></tbody>
    </table>

    <p class="note" style="margin-top:10px">Si quieres cambiar la seed o el token, edita este archivo y actualiza la constante <code>ADMIN_SEED</code> o <code>ADMIN_TOKEN</code>.</p>
  </div>

<script>
/* -------------------- CONFIGURACI√ìN FIJA -------------------- */
/* Lista de participantes (orden mostrado en selecci√≥n) */
const NAMES = [
  "Lupe","Joel","Abuelita","Jorge Cora","Jorge √Ångel","Janet","Tere","Sofi",
  "Germ√°n Grande","Germ√°n Chico","Rosario","Fer","Sara","V√≠ctor","Chary","Rub√©n",
  "Karim","Kael","Neithan","Oscar"
];

/* Mapping fijado (seg√∫n tu lista): quien da -> a qui√©n le toca */
const FIXED_MAPPING = {
  "Lupe": "Oscar",
  "Joel": "Jorge √Ångel",
  "Abuelita": "Chary",
  "Jorge Cora": "Karim",
  "Jorge √Ångel": "Sara",
  "Janet": "Rosario",
  "Tere": "Germ√°n Chico",
  "Sofi": "Kael",
  "Germ√°n Grande": "Sofi",
  "Germ√°n Chico": "V√≠ctor",
  "Rosario": "Janet",
  "Fer": "Neithan",
  "Sara": "Rub√©n",
  "V√≠ctor": "Fer",
  "Chary": "Abuelita",
  "Rub√©n": "Joel",
  "Karim": "Jorge Cora",
  "Kael": "Germ√°n Grande",
  "Neithan": "Lupe",
  "Oscar": "Tere"
};

/* Par√°metros de seguridad / acceso del administrador */
const ADMIN_TOKEN = 'familia-juarez';   // token que debe venir en ?admin=
const ADMIN_SEED = '123456';            // seed que exige la URL ?seed=123456

/* -------------------- L√ìGICA DE P√ÅGINA -------------------- */
function getParam(name) {
  return new URLSearchParams(window.location.search).get(name);
}

const adminParam = getParam('admin');
const seedParam = getParam('seed');

// Mostrar admin s√≥lo si BOTH son correctos
const isAdmin = (adminParam === ADMIN_TOKEN && seedParam === ADMIN_SEED);

if (isAdmin) {
  document.getElementById('publicView').style.display = 'none';
  const adminBox = document.getElementById('adminBox');
  adminBox.style.display = 'block';
  adminBox.setAttribute('aria-hidden', 'false');
  // llenar tabla
  const tbody = document.querySelector('#adminTable tbody');
  tbody.innerHTML = '';
  for (const giver of NAMES) {
    const tr = document.createElement('tr');
    const td1 = document.createElement('td'); td1.textContent = giver;
    const td2 = document.createElement('td'); td2.textContent = FIXED_MAPPING[giver] || '(sin asignar)';
    tr.appendChild(td1); tr.appendChild(td2);
    tbody.appendChild(tr);
  }
  document.getElementById('seedDisplay').textContent = seedParam;
} else {
  // no es admin: mostrar mensaje de cerrado (default)
  document.getElementById('adminBox').style.display = 'none';
}
</script>
</body>
</html>



